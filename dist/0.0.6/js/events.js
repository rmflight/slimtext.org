(function(){var e;window.full_window=function(){return window.layout.state.north.isVisible?window.layout.close("north"):void 0},window.exit_full_window=function(){return window.layout.state.north.isClosed?window.layout.open("north"):void 0},window.editor.commands.addCommand({name:"saveCommand",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){return window.save_file()},readOnly:!1}),window.editor.commands.addCommand({name:"exitFullWindowCommand",bindKey:{win:"Esc",mac:"Esc"},exec:function(){return window.exit_full_window()}}),e=_.debounce(function(){return 0!==document.title.indexOf("* ")?document.title="* "+document.title:void 0},500,!0),window.editor.getSession().on("change",function(){return e(),window.editor.focus()}),$("body").on("click",".file-link",function(){return window.open_path($(this).data("path"))}),$("body").on("click",".full_window_btn",function(){return window.full_window()}),$("body").on("click",".save_btn",function(){return window.save_file()}),$("body").on("click",".mode-link",function(){return window.editor.getSession().setMode("ace/mode/"+$(this).data("mode"))}),$("body").on("click",".options_btn",function(){return chrome.tabs.create({url:chrome.extension.getURL("html/options.html")})}),$("body").on("click",".about_btn",function(){return window.notice("Slim Text "+chrome.app.getDetails().version,"Copyright Â© 2012 - 2013 slimtext.org",5e3)}),$("body").on("change","#drives_select",function(){return window.open_path($(this).val())}),$("body").on("click",".remove_lines_btn",function(){return window.editor.removeLines()}),$("body").on("click",".lower_case_btn",function(){return window.editor.toLowerCase()}),$("body").on("click",".upper_case_btn",function(){return window.editor.toUpperCase()}),$("body").on("click",".toggle_comment_btn",function(){return window.editor.toggleCommentLines()}),$("body").on("click",".indent_btn",function(){return window.editor.indent()}),$("body").on("click",".outdent_btn",function(){return window.editor.blockOutdent()}),$("body").on("click",".toggle_invisibles_btn",function(){return window.editor.setShowInvisibles(!window.editor.getShowInvisibles())}),$("body").on("click",".toggle_word_wrap_btn",function(){return window.editor.getSession().setUseWrapMode(!window.editor.getSession().getUseWrapMode())}),$("body").on("click",".find_btn",function(){return ace.require("ace/ext/searchbox").Search(window.editor)}),$("body").on("click",".replace_btn",function(){return ace.require("ace/ext/searchbox").Search(window.editor,!0)}),$("body").on("click",".new_file_btn",function(){return setTimeout(function(){return window.create_file()},50)}),$("body").on("click",".new_folder_btn",function(){return setTimeout(function(){return window.create_folder()},50)}),$("body").on("click",".check_for_updates_btn",function(){return $.get("https://raw.github.com/tylerlong/slimtext.org/gh-pages/__version__",function(e){var n,o;return o=e.trim(),n=chrome.app.getDetails().version,o>n?window.notice(""+chrome.i18n.getMessage("new_version")+": "+o,chrome.i18n.getMessage("fetch_and_install"),8e3):window.notice(chrome.i18n.getMessage("no_update"),""+chrome.i18n.getMessage("newest_version")+": "+n,5e3)}).fail(function(){return window.notice(chrome.i18n.getMessage("network_error"),chrome.i18n.getMessage("check_manually"),5e3)})}),window.onbeforeunload=function(){return chrome.storage.local.set({path:window.storage.path,file:window.storage.file}),0===document.title.indexOf("* ")?'"'+window.storage.file+'" '+chrome.i18n.getMessage("save_before_leaving"):void 0},chrome.omnibox.onInputEntered.addListener(function(e){return chrome.tabs.getCurrent(function(n){return chrome.tabs.query({currentWindow:!0,active:!0},function(o){var t,i,r,c;if(o[0].id===n.id)switch(e=e.replace(/\s{2,}/g," "),c=e.split(" "),i=c[0],r=_.rest(c).join(" "),i){case"save":return window.save_file();case"open":case"cd":return 0===r.indexOf("/")||1===r.indexOf(":/")?window.open_path(r):(t=window.combine_path(window.storage.path,r),""!==t?window.open_path(t):window.notice(chrome.i18n.getMessage("does_not_exist"),r));default:return window.notice(chrome.i18n.getMessage("command_not_found"),i)}})})})}).call(this);